{
  "openapi": "3.0.0",
  "info": {
    "title": "Child Event Manager Database API",
    "version": "2.0.0",
    "description": "API for querying and managing child and event data in the database"
  },
  "paths": {
    "/get-users": {
      "post": {
        "summary": "Get all users or filter by criteria",
        "description": "Retrieves user information from the database. Use this to find valid user IDs before creating children. Can optionally filter by email or name.",
        "operationId": "getUsers",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "description": "Filter by exact email address"
                  },
                  "name": {
                    "type": "string",
                    "description": "Filter by user's name (partial match)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "List of users",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "users": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "email": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    "count": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/get-children": {
      "post": {
        "summary": "Get all children or filter by criteria",
        "description": "Retrieves children information from the database. Can optionally filter by user ID or child name.",
        "operationId": "getChildren",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": {
                    "type": "string",
                    "description": "Filter by user ID"
                  },
                  "firstName": {
                    "type": "string",
                    "description": "Filter by child's first name"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "List of children",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "children": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/get-child-events": {
      "post": {
        "summary": "Get events for a specific child",
        "description": "Retrieves all events associated with a specific child",
        "operationId": "getChildEvents",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "childId"
                ],
                "properties": {
                  "childId": {
                    "type": "string",
                    "description": "The ID of the child"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "List of events for the child",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "events": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/get-child-details": {
      "post": {
        "summary": "Get detailed information about a specific child",
        "description": "Retrieves comprehensive information about a child including their events",
        "operationId": "getChildDetails",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "childId"
                ],
                "properties": {
                  "childId": {
                    "type": "string",
                    "description": "The ID of the child"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Detailed child information",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "child": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/get-event-statistics": {
      "post": {
        "summary": "Get statistics about events",
        "description": "Retrieves aggregate statistics about events, such as counts by type",
        "operationId": "getEventStatistics",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "childId": {
                    "type": "string",
                    "description": "Optional: Filter statistics by child ID"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Event statistics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statistics": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/create-child": {
      "post": {
        "summary": "Create a new child record",
        "description": "Adds a new child to the database. IMPORTANT: First call without 'confirmed' to get a preview, then call again with confirmed=true after user confirms.",
        "operationId": "createChild",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "firstName",
                  "dateOfBirth",
                  "userId"
                ],
                "properties": {
                  "confirmed": {
                    "type": "boolean",
                    "description": "Set to true only after the user explicitly confirms the action. If not set or false, returns a preview requiring confirmation."
                  },
                  "firstName": {
                    "type": "string",
                    "description": "Child's first name"
                  },
                  "lastName": {
                    "type": "string",
                    "description": "Child's last name"
                  },
                  "dateOfBirth": {
                    "type": "string",
                    "description": "Date of birth in YYYY-MM-DD format"
                  },
                  "gender": {
                    "type": "string",
                    "description": "Child's gender"
                  },
                  "allergies": {
                    "type": "string",
                    "description": "Any allergies"
                  },
                  "medicalInfo": {
                    "type": "string",
                    "description": "Medical information"
                  },
                  "notes": {
                    "type": "string",
                    "description": "Additional notes"
                  },
                  "userId": {
                    "type": "string",
                    "description": "ID of the user who owns this child record"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Child created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "child": {
                      "type": "object"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/update-child": {
      "post": {
        "summary": "Update child information",
        "description": "Updates an existing child's information. IMPORTANT: First call without 'confirmed' to get a preview, then call again with confirmed=true after user confirms.",
        "operationId": "updateChild",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "childId"
                ],
                "properties": {
                  "confirmed": {
                    "type": "boolean",
                    "description": "Set to true only after the user explicitly confirms the action. If not set or false, returns a preview requiring confirmation."
                  },
                  "childId": {
                    "type": "string",
                    "description": "ID of the child to update"
                  },
                  "firstName": {
                    "type": "string",
                    "description": "Child's first name"
                  },
                  "lastName": {
                    "type": "string",
                    "description": "Child's last name"
                  },
                  "dateOfBirth": {
                    "type": "string",
                    "description": "Date of birth in YYYY-MM-DD format"
                  },
                  "gender": {
                    "type": "string",
                    "description": "Child's gender"
                  },
                  "allergies": {
                    "type": "string",
                    "description": "Any allergies"
                  },
                  "medicalInfo": {
                    "type": "string",
                    "description": "Medical information"
                  },
                  "notes": {
                    "type": "string",
                    "description": "Additional notes"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Child updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "child": {
                      "type": "object"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/delete-child": {
      "post": {
        "summary": "Delete a child record",
        "description": "Removes a child and all associated events permanently. IMPORTANT: First call without 'confirmed' to get a preview, then call again with confirmed=true after user confirms. This is a destructive action!",
        "operationId": "deleteChild",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "childId"
                ],
                "properties": {
                  "confirmed": {
                    "type": "boolean",
                    "description": "Set to true only after the user explicitly confirms the deletion. If not set or false, returns a preview requiring confirmation."
                  },
                  "childId": {
                    "type": "string",
                    "description": "ID of the child to delete"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Child deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "deletedChildId": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/create-event": {
      "post": {
        "summary": "Create a new event for a child",
        "description": "Adds a new event to a child's timeline. IMPORTANT: First call without 'confirmed' to get a preview, then call again with confirmed=true after user confirms.",
        "operationId": "createEvent",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "childId",
                  "name",
                  "eventType"
                ],
                "properties": {
                  "confirmed": {
                    "type": "boolean",
                    "description": "Set to true only after the user explicitly confirms the action. If not set or false, returns a preview requiring confirmation."
                  },
                  "childId": {
                    "type": "string",
                    "description": "ID of the child this event is for"
                  },
                  "name": {
                    "type": "string",
                    "description": "Name of the event"
                  },
                  "eventType": {
                    "type": "string",
                    "description": "Type of event (e.g., Medical, Education, Sports, Arts, Social, Celebration)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Event created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "event": {
                      "type": "object"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/update-event": {
      "post": {
        "summary": "Update an event",
        "description": "Updates an existing event's information. IMPORTANT: First call without 'confirmed' to get a preview, then call again with confirmed=true after user confirms.",
        "operationId": "updateEvent",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "eventId"
                ],
                "properties": {
                  "confirmed": {
                    "type": "boolean",
                    "description": "Set to true only after the user explicitly confirms the action. If not set or false, returns a preview requiring confirmation."
                  },
                  "eventId": {
                    "type": "string",
                    "description": "ID of the event to update"
                  },
                  "name": {
                    "type": "string",
                    "description": "Name of the event"
                  },
                  "eventType": {
                    "type": "string",
                    "description": "Type of event"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Event updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "event": {
                      "type": "object"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/delete-event": {
      "post": {
        "summary": "Delete an event",
        "description": "Removes an event permanently. IMPORTANT: First call without 'confirmed' to get a preview, then call again with confirmed=true after user confirms.",
        "operationId": "deleteEvent",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "eventId"
                ],
                "properties": {
                  "confirmed": {
                    "type": "boolean",
                    "description": "Set to true only after the user explicitly confirms the deletion. If not set or false, returns a preview requiring confirmation."
                  },
                  "eventId": {
                    "type": "string",
                    "description": "ID of the event to delete"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Event deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "deletedEventId": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}